<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>minilola.typ_soundness</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library minilola.typ_soundness</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">minilola</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="minilola.lang.html#"><span class="id" title="library">lang</span></a> <a class="idref" href="minilola.sem.html#"><span class="id" title="library">sem</span></a> <a class="idref" href="minilola.typ.html#"><span class="id" title="library">typ</span></a> <a class="idref" href="minilola.opt.html#"><span class="id" title="library">opt</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">FunctionalExtensionality</span> <span class="id" title="library">Sorting.Permutation</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab13"></a><h1 class="section">Soundness proof of the type system</h1>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  Equations are "consistent" if they have at least one model:
  for every inputs, there must existst at least one output
  satisfying the equations.
  Our goal is to prove that well-typed equations are consistent.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="Consistent" class="idref" href="#Consistent"><span class="id" title="definition">Consistent</span></a> (<a id="s:1" class="idref" href="#s:1"><span class="id" title="binder">s</span></a> : <a class="idref" href="minilola.lang.html#Spec"><span class="id" title="definition">Spec</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="rin:2" class="idref" href="#rin:2"><span class="id" title="binder">rin</span></a> : <a class="idref" href="minilola.lang.html#InMap"><span class="id" title="definition">InMap</span></a>), <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="rout:3" class="idref" href="#rout:3"><span class="id" title="binder">rout</span></a> : <a class="idref" href="minilola.lang.html#OutMap"><span class="id" title="definition">OutMap</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="minilola.sem.html#Sem"><span class="id" title="definition">Sem</span></a> <a class="idref" href="minilola.typ_soundness.html#s:1"><span class="id" title="variable">s</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="minilola.typ_soundness.html#rin:2"><span class="id" title="variable">rin</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:3"><span class="id" title="variable">rout</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab14"></a><h2 class="section">Preliminary Definitions</h2>

<div class="paragraph"> </div>

 Partial Maps 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="Pmap" class="idref" href="#Pmap"><span class="id" title="definition">Pmap</span></a> := <a class="idref" href="minilola.lang.html#OUT"><span class="id" title="axiom">OUT</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="minilola.lang.html#stream"><span class="id" title="definition">stream</span></a>.<br/>

<br/>
</div>

<div class="doc">
Extending a partial map 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="pextend" class="idref" href="#pextend"><span class="id" title="definition">pextend</span></a> (<a id="p:4" class="idref" href="#p:4"><span class="id" title="binder">p</span></a> : <a class="idref" href="minilola.typ_soundness.html#Pmap"><span class="id" title="definition">Pmap</span></a>) (<a id="x:5" class="idref" href="#x:5"><span class="id" title="binder">x</span></a> : <a class="idref" href="minilola.lang.html#OUT"><span class="id" title="axiom">OUT</span></a>) (<a id="w:6" class="idref" href="#w:6"><span class="id" title="binder">w</span></a> : <a class="idref" href="minilola.lang.html#stream"><span class="id" title="definition">stream</span></a>) : <a class="idref" href="minilola.typ_soundness.html#Pmap"><span class="id" title="definition">Pmap</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="x':7" class="idref" href="#x':7"><span class="id" title="binder">x'</span></a> ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="minilola.lang.html#OUT_dec"><span class="id" title="axiom">OUT_dec</span></a> <a class="idref" href="minilola.typ_soundness.html#x:5"><span class="id" title="variable">x</span></a> <a class="idref" href="minilola.typ_soundness.html#x':7"><span class="id" title="variable">x'</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="minilola.typ_soundness.html#w:6"><span class="id" title="variable">w</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="minilola.typ_soundness.html#p:4"><span class="id" title="variable">p</span></a> <a class="idref" href="minilola.typ_soundness.html#x':7"><span class="id" title="variable">x'</span></a>.<br/>

<br/>
</div>

<div class="doc">
Extending a total map 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="extend" class="idref" href="#extend"><span class="id" title="definition">extend</span></a> (<a id="p:8" class="idref" href="#p:8"><span class="id" title="binder">p</span></a> : <a class="idref" href="minilola.lang.html#OutMap"><span class="id" title="definition">OutMap</span></a>) (<a id="x:9" class="idref" href="#x:9"><span class="id" title="binder">x</span></a> : <a class="idref" href="minilola.lang.html#OUT"><span class="id" title="axiom">OUT</span></a>) (<a id="w:10" class="idref" href="#w:10"><span class="id" title="binder">w</span></a> : <a class="idref" href="minilola.lang.html#stream"><span class="id" title="definition">stream</span></a>) : <a class="idref" href="minilola.lang.html#OutMap"><span class="id" title="definition">OutMap</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="x':11" class="idref" href="#x':11"><span class="id" title="binder">x'</span></a> ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="minilola.lang.html#OUT_dec"><span class="id" title="axiom">OUT_dec</span></a> <a class="idref" href="minilola.typ_soundness.html#x:9"><span class="id" title="variable">x</span></a> <a class="idref" href="minilola.typ_soundness.html#x':11"><span class="id" title="variable">x'</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="minilola.typ_soundness.html#w:10"><span class="id" title="variable">w</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="minilola.typ_soundness.html#p:8"><span class="id" title="variable">p</span></a> <a class="idref" href="minilola.typ_soundness.html#x':11"><span class="id" title="variable">x'</span></a>.<br/>

<br/>
</div>

<div class="doc">
Merging a partial map and a total map 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="merge" class="idref" href="#merge"><span class="id" title="definition">merge</span></a> (<a id="rout1:12" class="idref" href="#rout1:12"><span class="id" title="binder">rout1</span></a> : <a class="idref" href="minilola.typ_soundness.html#Pmap"><span class="id" title="definition">Pmap</span></a>) (<a id="rout2:13" class="idref" href="#rout2:13"><span class="id" title="binder">rout2</span></a> : <a class="idref" href="minilola.lang.html#OutMap"><span class="id" title="definition">OutMap</span></a>) : <a class="idref" href="minilola.lang.html#OutMap"><span class="id" title="definition">OutMap</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="x:14" class="idref" href="#x:14"><span class="id" title="binder">x</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="minilola.typ_soundness.html#rout1:12"><span class="id" title="variable">rout1</span></a> <a class="idref" href="minilola.typ_soundness.html#x:14"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">w</span> ⇒ <span class="id" title="var">w</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="minilola.typ_soundness.html#rout2:13"><span class="id" title="variable">rout2</span></a> <a class="idref" href="minilola.typ_soundness.html#x:14"><span class="id" title="variable">x</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Merging lemma 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="merge_pextend" class="idref" href="#merge_pextend"><span class="id" title="lemma">merge_pextend</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="rout1:15" class="idref" href="#rout1:15"><span class="id" title="binder">rout1</span></a> <a id="rout2:16" class="idref" href="#rout2:16"><span class="id" title="binder">rout2</span></a> <a id="x:17" class="idref" href="#x:17"><span class="id" title="binder">x</span></a> <a id="w:18" class="idref" href="#w:18"><span class="id" title="binder">w</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#rout1:15"><span class="id" title="variable">rout1</span></a> <a class="idref" href="minilola.typ_soundness.html#x:17"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#merge"><span class="id" title="definition">merge</span></a> (<a class="idref" href="minilola.typ_soundness.html#pextend"><span class="id" title="definition">pextend</span></a> <a class="idref" href="minilola.typ_soundness.html#rout1:15"><span class="id" title="variable">rout1</span></a> <a class="idref" href="minilola.typ_soundness.html#x:17"><span class="id" title="variable">x</span></a> <a class="idref" href="minilola.typ_soundness.html#w:18"><span class="id" title="variable">w</span></a>) <a class="idref" href="minilola.typ_soundness.html#rout2:16"><span class="id" title="variable">rout2</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="minilola.typ_soundness.html#merge"><span class="id" title="definition">merge</span></a> <a class="idref" href="minilola.typ_soundness.html#rout1:15"><span class="id" title="variable">rout1</span></a> (<a class="idref" href="minilola.typ_soundness.html#extend"><span class="id" title="definition">extend</span></a> <a class="idref" href="minilola.typ_soundness.html#rout2:16"><span class="id" title="variable">rout2</span></a> <a class="idref" href="minilola.typ_soundness.html#x:17"><span class="id" title="variable">x</span></a> <a class="idref" href="minilola.typ_soundness.html#w:18"><span class="id" title="variable">w</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">functional_extensionality</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.lang.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="minilola.typ_soundness.html#merge"><span class="id" title="definition">merge</span></a>, <a class="idref" href="minilola.typ_soundness.html#pextend"><span class="id" title="definition">pextend</span></a>, <a class="idref" href="minilola.typ_soundness.html#extend"><span class="id" title="definition">extend</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="minilola.lang.html#OUT_dec"><span class="id" title="axiom">OUT_dec</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">rout1</span> <span class="id" title="var">y</span>); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Empty typing context 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="bot_tenv" class="idref" href="#bot_tenv"><span class="id" title="definition">bot_tenv</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
</div>

<div class="doc">
Empty partial map 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="bot_pmap" class="idref" href="#bot_pmap"><span class="id" title="definition">bot_pmap</span></a> : <a class="idref" href="minilola.typ_soundness.html#Pmap"><span class="id" title="definition">Pmap</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="merge_bot" class="idref" href="#merge_bot"><span class="id" title="lemma">merge_bot</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="rout:19" class="idref" href="#rout:19"><span class="id" title="binder">rout</span></a>, <a class="idref" href="minilola.typ_soundness.html#merge"><span class="id" title="definition">merge</span></a> <a class="idref" href="minilola.typ_soundness.html#bot_pmap"><span class="id" title="definition">bot_pmap</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:19"><span class="id" title="variable">rout</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:19"><span class="id" title="variable">rout</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  Semantic of expressions under partial output maps

</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="PartialExprSem" class="idref" href="#PartialExprSem"><span class="id" title="definition">PartialExprSem</span></a> (<a id="e:20" class="idref" href="#e:20"><span class="id" title="binder">e</span></a> : <a class="idref" href="minilola.lang.html#Expr"><span class="id" title="inductive">Expr</span></a>) (<a id="rin:21" class="idref" href="#rin:21"><span class="id" title="binder">rin</span></a> : <a class="idref" href="minilola.lang.html#InMap"><span class="id" title="definition">InMap</span></a>) (<a id="rout:22" class="idref" href="#rout:22"><span class="id" title="binder">rout</span></a> : <a class="idref" href="minilola.typ_soundness.html#Pmap"><span class="id" title="definition">Pmap</span></a>) (<a id="n:23" class="idref" href="#n:23"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="minilola.lang.html#value"><span class="id" title="axiom">value</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="minilola.typ_soundness.html#e:20"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="minilola.lang.html#EVar"><span class="id" title="constructor">EVar</span></a> (<a class="idref" href="minilola.lang.html#Varin"><span class="id" title="constructor">Varin</span></a> <span class="id" title="var">x</span>) ⇒ <a class="idref" href="minilola.sem.html#sync"><span class="id" title="definition">sync</span></a> (<a class="idref" href="minilola.typ_soundness.html#rin:21"><span class="id" title="variable">rin</span></a> <span class="id" title="var">x</span>) <a class="idref" href="minilola.typ_soundness.html#n:23"><span class="id" title="variable">n</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="minilola.lang.html#EVar"><span class="id" title="constructor">EVar</span></a> (<a class="idref" href="minilola.lang.html#Varout"><span class="id" title="constructor">Varout</span></a> <span class="id" title="var">x</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="minilola.typ_soundness.html#rout:22"><span class="id" title="variable">rout</span></a> <span class="id" title="var">x</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">w</span> ⇒ <a class="idref" href="minilola.sem.html#sync"><span class="id" title="definition">sync</span></a> <span class="id" title="var">w</span> <a class="idref" href="minilola.typ_soundness.html#n:23"><span class="id" title="variable">n</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="minilola.lang.html#EVal"><span class="id" title="constructor">EVal</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;| <a class="idref" href="minilola.lang.html#EPrev"><span class="id" title="constructor">EPrev</span></a> (<a class="idref" href="minilola.lang.html#Varin"><span class="id" title="constructor">Varin</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">e</span> ⇒ <a class="idref" href="minilola.sem.html#prev"><span class="id" title="definition">prev</span></a> (<a class="idref" href="minilola.typ_soundness.html#rin:21"><span class="id" title="variable">rin</span></a> <span class="id" title="var">x</span>) <a class="idref" href="minilola.typ_soundness.html#n:23"><span class="id" title="variable">n</span></a> (<a class="idref" href="minilola.typ_soundness.html#PartialExprSem:24"><span class="id" title="definition">PartialExprSem</span></a> <a class="idref" href="minilola.typ_soundness.html#e:20"><span class="id" title="variable">e</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:21"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:22"><span class="id" title="variable">rout</span></a> <a class="idref" href="minilola.typ_soundness.html#n:23"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="minilola.lang.html#EPrev"><span class="id" title="constructor">EPrev</span></a> (<a class="idref" href="minilola.lang.html#Varout"><span class="id" title="constructor">Varout</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">e</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="minilola.typ_soundness.html#rout:22"><span class="id" title="variable">rout</span></a> <span class="id" title="var">x</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">w</span> ⇒ <a class="idref" href="minilola.sem.html#prev"><span class="id" title="definition">prev</span></a> <span class="id" title="var">w</span> <a class="idref" href="minilola.typ_soundness.html#n:23"><span class="id" title="variable">n</span></a> (<a class="idref" href="minilola.typ_soundness.html#PartialExprSem:24"><span class="id" title="definition">PartialExprSem</span></a> <a class="idref" href="minilola.typ_soundness.html#e:20"><span class="id" title="variable">e</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:21"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:22"><span class="id" title="variable">rout</span></a> <a class="idref" href="minilola.typ_soundness.html#n:23"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="minilola.lang.html#EHold"><span class="id" title="constructor">EHold</span></a> (<a class="idref" href="minilola.lang.html#Varin"><span class="id" title="constructor">Varin</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">e</span> ⇒ <a class="idref" href="minilola.sem.html#hold"><span class="id" title="definition">hold</span></a> (<a class="idref" href="minilola.typ_soundness.html#rin:21"><span class="id" title="variable">rin</span></a> <span class="id" title="var">x</span>) <a class="idref" href="minilola.typ_soundness.html#n:23"><span class="id" title="variable">n</span></a> (<a class="idref" href="minilola.typ_soundness.html#PartialExprSem:24"><span class="id" title="definition">PartialExprSem</span></a> <a class="idref" href="minilola.typ_soundness.html#e:20"><span class="id" title="variable">e</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:21"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:22"><span class="id" title="variable">rout</span></a> <a class="idref" href="minilola.typ_soundness.html#n:23"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="minilola.lang.html#EHold"><span class="id" title="constructor">EHold</span></a> (<a class="idref" href="minilola.lang.html#Varout"><span class="id" title="constructor">Varout</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">e</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="minilola.typ_soundness.html#rout:22"><span class="id" title="variable">rout</span></a> <span class="id" title="var">x</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">w</span> ⇒ <a class="idref" href="minilola.sem.html#hold"><span class="id" title="definition">hold</span></a> <span class="id" title="var">w</span> <a class="idref" href="minilola.typ_soundness.html#n:23"><span class="id" title="variable">n</span></a> (<a class="idref" href="minilola.typ_soundness.html#PartialExprSem:24"><span class="id" title="definition">PartialExprSem</span></a> <a class="idref" href="minilola.typ_soundness.html#e:20"><span class="id" title="variable">e</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:21"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:22"><span class="id" title="variable">rout</span></a> <a class="idref" href="minilola.typ_soundness.html#n:23"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="minilola.lang.html#EBinOp"><span class="id" title="constructor">EBinOp</span></a> <span class="id" title="var">f</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> ⇒ <a class="idref" href="minilola.opt.html#binop"><span class="id" title="definition">binop</span></a> <span class="id" title="var">f</span> (<a class="idref" href="minilola.typ_soundness.html#PartialExprSem:24"><span class="id" title="definition">PartialExprSem</span></a> <span class="id" title="var">e1</span> <a class="idref" href="minilola.typ_soundness.html#rin:21"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:22"><span class="id" title="variable">rout</span></a> <a class="idref" href="minilola.typ_soundness.html#n:23"><span class="id" title="variable">n</span></a>) (<a class="idref" href="minilola.typ_soundness.html#PartialExprSem:24"><span class="id" title="definition">PartialExprSem</span></a> <span class="id" title="var">e2</span> <a class="idref" href="minilola.typ_soundness.html#rin:21"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:22"><span class="id" title="variable">rout</span></a> <a class="idref" href="minilola.typ_soundness.html#n:23"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab15"></a><h2 class="section">Semantic model of the type system</h2>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

  Interpretation of pacing annotations as sets of streams

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="PacingRel" class="idref" href="#PacingRel"><span class="id" title="definition">PacingRel</span></a> (<a id="t:26" class="idref" href="#t:26"><span class="id" title="binder">t</span></a> : <a class="idref" href="minilola.lang.html#Pacing"><span class="id" title="inductive">Pacing</span></a>) (<a id="rin:27" class="idref" href="#rin:27"><span class="id" title="binder">rin</span></a> : <a class="idref" href="minilola.lang.html#InMap"><span class="id" title="definition">InMap</span></a>) (<a id="w:28" class="idref" href="#w:28"><span class="id" title="binder">w</span></a> : <a class="idref" href="minilola.lang.html#stream"><span class="id" title="definition">stream</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="n:29" class="idref" href="#n:29"><span class="id" title="binder">n</span></a>, <a class="idref" href="minilola.sem.html#PacingSem"><span class="id" title="definition">PacingSem</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:27"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#t:26"><span class="id" title="variable">t</span></a> <a class="idref" href="minilola.typ_soundness.html#n:29"><span class="id" title="variable">n</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="minilola.typ_soundness.html#w:28"><span class="id" title="variable">w</span></a> <a class="idref" href="minilola.typ_soundness.html#n:29"><span class="id" title="variable">n</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Comparing the domain of typing environements and partial maps

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="same_dom" class="idref" href="#same_dom"><span class="id" title="definition">same_dom</span></a> (<a id="G:30" class="idref" href="#G:30"><span class="id" title="binder">G</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a>) (<a id="rout:31" class="idref" href="#rout:31"><span class="id" title="binder">rout</span></a> : <a class="idref" href="minilola.typ_soundness.html#Pmap"><span class="id" title="definition">Pmap</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:32" class="idref" href="#x:32"><span class="id" title="binder">x</span></a>, <a class="idref" href="minilola.typ_soundness.html#G:30"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#x:32"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:31"><span class="id" title="variable">rout</span></a> <a class="idref" href="minilola.typ_soundness.html#x:32"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:33" class="idref" href="#x:33"><span class="id" title="binder">x</span></a> <a id="t:34" class="idref" href="#t:34"><span class="id" title="binder">t</span></a>, <a class="idref" href="minilola.typ_soundness.html#G:30"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#x:33"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="minilola.typ_soundness.html#t:34"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="w:35" class="idref" href="#w:35"><span class="id" title="binder">w</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:31"><span class="id" title="variable">rout</span></a> <a class="idref" href="minilola.typ_soundness.html#x:33"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="minilola.typ_soundness.html#w:35"><span class="id" title="variable">w</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Interpretation of typing environement as sets of partial output maps

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="EnvRel" class="idref" href="#EnvRel"><span class="id" title="definition">EnvRel</span></a> (<a id="G:36" class="idref" href="#G:36"><span class="id" title="binder">G</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a>) (<a id="rin:37" class="idref" href="#rin:37"><span class="id" title="binder">rin</span></a> : <a class="idref" href="minilola.lang.html#InMap"><span class="id" title="definition">InMap</span></a>) (<a id="rout:38" class="idref" href="#rout:38"><span class="id" title="binder">rout</span></a> : <a class="idref" href="minilola.typ_soundness.html#Pmap"><span class="id" title="definition">Pmap</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#same_dom"><span class="id" title="definition">same_dom</span></a> <a class="idref" href="minilola.typ_soundness.html#G:36"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:38"><span class="id" title="variable">rout</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="x:39" class="idref" href="#x:39"><span class="id" title="binder">x</span></a> <a id="t:40" class="idref" href="#t:40"><span class="id" title="binder">t</span></a> <a id="w:41" class="idref" href="#w:41"><span class="id" title="binder">w</span></a>, <a class="idref" href="minilola.typ_soundness.html#G:36"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#x:39"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="minilola.typ_soundness.html#t:40"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:38"><span class="id" title="variable">rout</span></a> <a class="idref" href="minilola.typ_soundness.html#x:39"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="minilola.typ_soundness.html#w:41"><span class="id" title="variable">w</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="minilola.typ_soundness.html#PacingRel"><span class="id" title="definition">PacingRel</span></a> <a class="idref" href="minilola.typ_soundness.html#t:40"><span class="id" title="variable">t</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:37"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#w:41"><span class="id" title="variable">w</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Interpretation of typing environements as sets of stream expressions

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="ExprRel" class="idref" href="#ExprRel"><span class="id" title="definition">ExprRel</span></a> (<a id="G:42" class="idref" href="#G:42"><span class="id" title="binder">G</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a>) (<a id="t:43" class="idref" href="#t:43"><span class="id" title="binder">t</span></a> : <a class="idref" href="minilola.lang.html#Pacing"><span class="id" title="inductive">Pacing</span></a>) (<a id="rin:44" class="idref" href="#rin:44"><span class="id" title="binder">rin</span></a> : <a class="idref" href="minilola.lang.html#InMap"><span class="id" title="definition">InMap</span></a>) (<a id="e:45" class="idref" href="#e:45"><span class="id" title="binder">e</span></a> : <a class="idref" href="minilola.lang.html#Expr"><span class="id" title="inductive">Expr</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="rout:46" class="idref" href="#rout:46"><span class="id" title="binder">rout</span></a>, <a class="idref" href="minilola.typ_soundness.html#EnvRel"><span class="id" title="definition">EnvRel</span></a> <a class="idref" href="minilola.typ_soundness.html#G:42"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:44"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:46"><span class="id" title="variable">rout</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="n:47" class="idref" href="#n:47"><span class="id" title="binder">n</span></a>, (<a class="idref" href="minilola.sem.html#PacingSem"><span class="id" title="definition">PacingSem</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:44"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#t:43"><span class="id" title="variable">t</span></a> <a class="idref" href="minilola.typ_soundness.html#n:47"><span class="id" title="variable">n</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="minilola.typ_soundness.html#PartialExprSem"><span class="id" title="definition">PartialExprSem</span></a> <a class="idref" href="minilola.typ_soundness.html#e:45"><span class="id" title="variable">e</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:44"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:46"><span class="id" title="variable">rout</span></a> <a class="idref" href="minilola.typ_soundness.html#n:47"><span class="id" title="variable">n</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>).<br/>

<br/>
</div>

<div class="doc">
  Interpretation of typing environements as sets of specifications

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="SpecRel" class="idref" href="#SpecRel"><span class="id" title="definition">SpecRel</span></a> (<a id="G:48" class="idref" href="#G:48"><span class="id" title="binder">G</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a>) (<a id="rin:49" class="idref" href="#rin:49"><span class="id" title="binder">rin</span></a> : <a class="idref" href="minilola.lang.html#InMap"><span class="id" title="definition">InMap</span></a>) (<a id="s:50" class="idref" href="#s:50"><span class="id" title="binder">s</span></a> : <a class="idref" href="minilola.lang.html#Spec"><span class="id" title="definition">Spec</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="rout1:51" class="idref" href="#rout1:51"><span class="id" title="binder">rout1</span></a>, <a class="idref" href="minilola.typ_soundness.html#EnvRel"><span class="id" title="definition">EnvRel</span></a> <a class="idref" href="minilola.typ_soundness.html#G:48"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:49"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#rout1:51"><span class="id" title="variable">rout1</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="rout2:52" class="idref" href="#rout2:52"><span class="id" title="binder">rout2</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="minilola.sem.html#Sem"><span class="id" title="definition">Sem</span></a> <a class="idref" href="minilola.typ_soundness.html#s:50"><span class="id" title="variable">s</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="minilola.typ_soundness.html#rin:49"><span class="id" title="variable">rin</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="minilola.typ_soundness.html#merge"><span class="id" title="definition">merge</span></a> <a class="idref" href="minilola.typ_soundness.html#rout1:51"><span class="id" title="variable">rout1</span></a> <a class="idref" href="minilola.typ_soundness.html#rout2:52"><span class="id" title="variable">rout2</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Semantic typing judgement for specifications 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="SpecTypeSem" class="idref" href="#SpecTypeSem"><span class="id" title="definition">SpecTypeSem</span></a> (<a id="G:53" class="idref" href="#G:53"><span class="id" title="binder">G</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a>) (<a id="s:54" class="idref" href="#s:54"><span class="id" title="binder">s</span></a> : <a class="idref" href="minilola.lang.html#Spec"><span class="id" title="definition">Spec</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="rin:55" class="idref" href="#rin:55"><span class="id" title="binder">rin</span></a>, <a class="idref" href="minilola.typ_soundness.html#SpecRel"><span class="id" title="definition">SpecRel</span></a> <a class="idref" href="minilola.typ_soundness.html#G:53"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:55"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#s:54"><span class="id" title="variable">s</span></a>.<br/>

<br/>
</div>

<div class="doc">
Semantic typing judgement for expressions 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="ExprTypeSem" class="idref" href="#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> (<a id="G:56" class="idref" href="#G:56"><span class="id" title="binder">G</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a>) (<a id="e:57" class="idref" href="#e:57"><span class="id" title="binder">e</span></a> : <a class="idref" href="minilola.lang.html#Expr"><span class="id" title="inductive">Expr</span></a>) (<a id="t:58" class="idref" href="#t:58"><span class="id" title="binder">t</span></a> : <a class="idref" href="minilola.lang.html#Pacing"><span class="id" title="inductive">Pacing</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="rin:59" class="idref" href="#rin:59"><span class="id" title="binder">rin</span></a>, <a class="idref" href="minilola.typ_soundness.html#ExprRel"><span class="id" title="definition">ExprRel</span></a> <a class="idref" href="minilola.typ_soundness.html#G:56"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#t:58"><span class="id" title="variable">t</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:59"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#e:57"><span class="id" title="variable">e</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Adequacy of the semantic model: semantic typing implies consistency.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="adequacy" class="idref" href="#adequacy"><span class="id" title="lemma">adequacy</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="s:60" class="idref" href="#s:60"><span class="id" title="binder">s</span></a>, <a class="idref" href="minilola.typ_soundness.html#SpecTypeSem"><span class="id" title="definition">SpecTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#bot_tenv"><span class="id" title="definition">bot_tenv</span></a> <a class="idref" href="minilola.typ_soundness.html#s:60"><span class="id" title="variable">s</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="minilola.typ_soundness.html#Consistent"><span class="id" title="definition">Consistent</span></a> <a class="idref" href="minilola.typ_soundness.html#s:60"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">rin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hs</span> <span class="id" title="var">rin</span> <a class="idref" href="minilola.typ_soundness.html#bot_pmap"><span class="id" title="definition">bot_pmap</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">rout2</span> &amp; <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> <span class="id" title="var">rout2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="minilola.typ_soundness.html#merge_bot"><span class="id" title="lemma">merge_bot</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab16"></a><h2 class="section">Soundness of the Type System for Expressions</h2>

<div class="paragraph"> </div>

 The typing rule for constant values is sound 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="expr_compat_val" class="idref" href="#expr_compat_val"><span class="id" title="lemma">expr_compat_val</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="G:61" class="idref" href="#G:61"><span class="id" title="binder">G</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a>) (<a id="v:62" class="idref" href="#v:62"><span class="id" title="binder">v</span></a> : <a class="idref" href="minilola.lang.html#value"><span class="id" title="axiom">value</span></a>) (<a id="t:63" class="idref" href="#t:63"><span class="id" title="binder">t</span></a> : <a class="idref" href="minilola.lang.html#Pacing"><span class="id" title="inductive">Pacing</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:61"><span class="id" title="variable">G</span></a> (<a class="idref" href="minilola.lang.html#EVal"><span class="id" title="constructor">EVal</span></a> <a class="idref" href="minilola.typ_soundness.html#v:62"><span class="id" title="variable">v</span></a>) <a class="idref" href="minilola.typ_soundness.html#t:63"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The typing rule for direct accesses to input variables is sound 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="expr_compat_var_in" class="idref" href="#expr_compat_var_in"><span class="id" title="lemma">expr_compat_var_in</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="G:64" class="idref" href="#G:64"><span class="id" title="binder">G</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a>) (<a id="x:65" class="idref" href="#x:65"><span class="id" title="binder">x</span></a> : <a class="idref" href="minilola.lang.html#IN"><span class="id" title="axiom">IN</span></a>) (<a id="t:66" class="idref" href="#t:66"><span class="id" title="binder">t</span></a> : <a class="idref" href="minilola.lang.html#Pacing"><span class="id" title="inductive">Pacing</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.sem.html#PacingEnt"><span class="id" title="definition">PacingEnt</span></a> <a class="idref" href="minilola.typ_soundness.html#t:66"><span class="id" title="variable">t</span></a> (<a class="idref" href="minilola.lang.html#PVar"><span class="id" title="constructor">PVar</span></a> <a class="idref" href="minilola.typ_soundness.html#x:65"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:64"><span class="id" title="variable">G</span></a> (<a class="idref" href="minilola.lang.html#EVar"><span class="id" title="constructor">EVar</span></a> (<a class="idref" href="minilola.lang.html#Varin"><span class="id" title="constructor">Varin</span></a> <a class="idref" href="minilola.typ_soundness.html#x:65"><span class="id" title="variable">x</span></a>)) <a class="idref" href="minilola.typ_soundness.html#t:66"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span> <span class="id" title="var">H1</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout</span> <span class="id" title="var">H2</span> <span class="id" title="var">n</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">rin</span> <span class="id" title="var">n</span> <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.typ_soundness.html#PartialExprSem"><span class="id" title="definition">PartialExprSem</span></a>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.sem.html#sync"><span class="id" title="definition">sync</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rin</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span>); <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The typing rule for direct accesses to output variables is sound 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="expr_compat_var_out" class="idref" href="#expr_compat_var_out"><span class="id" title="lemma">expr_compat_var_out</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="G:67" class="idref" href="#G:67"><span class="id" title="binder">G</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a>) (<a id="x:68" class="idref" href="#x:68"><span class="id" title="binder">x</span></a> : <a class="idref" href="minilola.lang.html#OUT"><span class="id" title="axiom">OUT</span></a>) (<a id="tcan:69" class="idref" href="#tcan:69"><span class="id" title="binder">tcan</span></a> <a id="tmust:70" class="idref" href="#tmust:70"><span class="id" title="binder">tmust</span></a> : <a class="idref" href="minilola.lang.html#Pacing"><span class="id" title="inductive">Pacing</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#G:67"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#x:68"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="minilola.typ_soundness.html#tcan:69"><span class="id" title="variable">tcan</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.sem.html#PacingEnt"><span class="id" title="definition">PacingEnt</span></a> <a class="idref" href="minilola.typ_soundness.html#tmust:70"><span class="id" title="variable">tmust</span></a> <a class="idref" href="minilola.typ_soundness.html#tcan:69"><span class="id" title="variable">tcan</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:67"><span class="id" title="variable">G</span></a> (<a class="idref" href="minilola.lang.html#EVar"><span class="id" title="constructor">EVar</span></a> (<a class="idref" href="minilola.lang.html#Varout"><span class="id" title="constructor">Varout</span></a> <a class="idref" href="minilola.typ_soundness.html#x:68"><span class="id" title="variable">x</span></a>)) <a class="idref" href="minilola.typ_soundness.html#tmust:70"><span class="id" title="variable">tmust</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">tcan</span> <span class="id" title="var">tmust</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout</span> [[<span class="id" title="var">H3_1</span> <span class="id" title="var">H3_2</span>] <span class="id" title="var">H3_3</span>] <span class="id" title="var">n</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H2</span> <span class="id" title="var">rin</span> <span class="id" title="var">n</span> <span class="id" title="var">H4</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H3_2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">w</span> &amp; <span class="id" title="var">Hw</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H3_3</span> <span class="id" title="var">x</span> <span class="id" title="var">_</span> <span class="id" title="var">w</span> <span class="id" title="var">H1</span> <span class="id" title="var">Hw</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H3_3</span> <span class="id" title="var">H3_4</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H3_3</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.typ_soundness.html#PartialExprSem"><span class="id" title="definition">PartialExprSem</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.sem.html#sync"><span class="id" title="definition">sync</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">w</span> <span class="id" title="var">n</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The typing rule for binary operators is sound 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="expr_compat_binop" class="idref" href="#expr_compat_binop"><span class="id" title="lemma">expr_compat_binop</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="G:71" class="idref" href="#G:71"><span class="id" title="binder">G</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a>) <a id="f:72" class="idref" href="#f:72"><span class="id" title="binder">f</span></a> (<a id="e1:73" class="idref" href="#e1:73"><span class="id" title="binder">e1</span></a> <a id="e2:74" class="idref" href="#e2:74"><span class="id" title="binder">e2</span></a> : <a class="idref" href="minilola.lang.html#Expr"><span class="id" title="inductive">Expr</span></a>) (<a id="t:75" class="idref" href="#t:75"><span class="id" title="binder">t</span></a> : <a class="idref" href="minilola.lang.html#Pacing"><span class="id" title="inductive">Pacing</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:71"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#e1:73"><span class="id" title="variable">e1</span></a> <a class="idref" href="minilola.typ_soundness.html#t:75"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:71"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#e2:74"><span class="id" title="variable">e2</span></a> <a class="idref" href="minilola.typ_soundness.html#t:75"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:71"><span class="id" title="variable">G</span></a> (<a class="idref" href="minilola.lang.html#EBinOp"><span class="id" title="constructor">EBinOp</span></a> <a class="idref" href="minilola.typ_soundness.html#f:72"><span class="id" title="variable">f</span></a> <a class="idref" href="minilola.typ_soundness.html#e1:73"><span class="id" title="variable">e1</span></a> <a class="idref" href="minilola.typ_soundness.html#e2:74"><span class="id" title="variable">e2</span></a>) <a class="idref" href="minilola.typ_soundness.html#t:75"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">G</span> <span class="id" title="var">f</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> <span class="id" title="var">t</span> <span class="id" title="var">He1</span> <span class="id" title="var">He2</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout</span> <span class="id" title="var">H1</span> <span class="id" title="var">n</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">He1</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout</span> <span class="id" title="var">H1</span> <span class="id" title="var">n</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">He2</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout</span> <span class="id" title="var">H1</span> <span class="id" title="var">n</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="minilola.typ_soundness.html#PartialExprSem"><span class="id" title="definition">PartialExprSem</span></a> <span class="id" title="var">e1</span>), (<a class="idref" href="minilola.typ_soundness.html#PartialExprSem"><span class="id" title="definition">PartialExprSem</span></a> <span class="id" title="var">e2</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expr_compat_prev_out" class="idref" href="#expr_compat_prev_out"><span class="id" title="lemma">expr_compat_prev_out</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="G:76" class="idref" href="#G:76"><span class="id" title="binder">G</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a>) (<a id="x:77" class="idref" href="#x:77"><span class="id" title="binder">x</span></a> : <a class="idref" href="minilola.lang.html#OUT"><span class="id" title="axiom">OUT</span></a>) (<a id="e:78" class="idref" href="#e:78"><span class="id" title="binder">e</span></a> : <a class="idref" href="minilola.lang.html#Expr"><span class="id" title="inductive">Expr</span></a>) (<a id="tcan:79" class="idref" href="#tcan:79"><span class="id" title="binder">tcan</span></a> <a id="tmust:80" class="idref" href="#tmust:80"><span class="id" title="binder">tmust</span></a> : <a class="idref" href="minilola.lang.html#Pacing"><span class="id" title="inductive">Pacing</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#G:76"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#x:77"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="minilola.typ_soundness.html#tcan:79"><span class="id" title="variable">tcan</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.sem.html#PacingEnt"><span class="id" title="definition">PacingEnt</span></a> <a class="idref" href="minilola.typ_soundness.html#tmust:80"><span class="id" title="variable">tmust</span></a> <a class="idref" href="minilola.typ_soundness.html#tcan:79"><span class="id" title="variable">tcan</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:76"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#e:78"><span class="id" title="variable">e</span></a> <a class="idref" href="minilola.typ_soundness.html#tmust:80"><span class="id" title="variable">tmust</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:76"><span class="id" title="variable">G</span></a> (<a class="idref" href="minilola.lang.html#EPrev"><span class="id" title="constructor">EPrev</span></a> (<a class="idref" href="minilola.lang.html#Varout"><span class="id" title="constructor">Varout</span></a> <a class="idref" href="minilola.typ_soundness.html#x:77"><span class="id" title="variable">x</span></a>) <a class="idref" href="minilola.typ_soundness.html#e:78"><span class="id" title="variable">e</span></a>) <a class="idref" href="minilola.typ_soundness.html#tmust:80"><span class="id" title="variable">tmust</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">tcan</span> <span class="id" title="var">tmust</span> <span class="id" title="var">Hx</span> <span class="id" title="var">Hent</span> <span class="id" title="var">He</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout</span> <span class="id" title="var">H1</span> <span class="id" title="var">n</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">He</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout</span> <span class="id" title="var">H1</span> <span class="id" title="var">n</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> <span class="id" title="var">H1</span>] <span class="id" title="var">H1'</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">x</span> <span class="id" title="var">_</span> <span class="id" title="var">Hx</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">w</span> &amp; <span class="id" title="var">Hw</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hent</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.sem.html#prev"><span class="id" title="definition">prev</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">w</span> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>, <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <a class="idref" href="minilola.sem.html#last"><span class="id" title="definition">last</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H1'</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H1'</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expr_compat_prev_in" class="idref" href="#expr_compat_prev_in"><span class="id" title="lemma">expr_compat_prev_in</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="G:81" class="idref" href="#G:81"><span class="id" title="binder">G</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a>) (<a id="x:82" class="idref" href="#x:82"><span class="id" title="binder">x</span></a> : <a class="idref" href="minilola.lang.html#IN"><span class="id" title="axiom">IN</span></a>) (<a id="e:83" class="idref" href="#e:83"><span class="id" title="binder">e</span></a> : <a class="idref" href="minilola.lang.html#Expr"><span class="id" title="inductive">Expr</span></a>) (<a id="tmust:84" class="idref" href="#tmust:84"><span class="id" title="binder">tmust</span></a> : <a class="idref" href="minilola.lang.html#Pacing"><span class="id" title="inductive">Pacing</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.sem.html#PacingEnt"><span class="id" title="definition">PacingEnt</span></a> <a class="idref" href="minilola.typ_soundness.html#tmust:84"><span class="id" title="variable">tmust</span></a> (<a class="idref" href="minilola.lang.html#PVar"><span class="id" title="constructor">PVar</span></a> <a class="idref" href="minilola.typ_soundness.html#x:82"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:81"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#e:83"><span class="id" title="variable">e</span></a> <a class="idref" href="minilola.typ_soundness.html#tmust:84"><span class="id" title="variable">tmust</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:81"><span class="id" title="variable">G</span></a> (<a class="idref" href="minilola.lang.html#EPrev"><span class="id" title="constructor">EPrev</span></a> (<a class="idref" href="minilola.lang.html#Varin"><span class="id" title="constructor">Varin</span></a> <a class="idref" href="minilola.typ_soundness.html#x:82"><span class="id" title="variable">x</span></a>) <a class="idref" href="minilola.typ_soundness.html#e:83"><span class="id" title="variable">e</span></a>) <a class="idref" href="minilola.typ_soundness.html#tmust:84"><span class="id" title="variable">tmust</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">tmust</span> <span class="id" title="var">Hent</span> <span class="id" title="var">He</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout</span> <span class="id" title="var">H1</span> <span class="id" title="var">n</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">He</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout</span> <span class="id" title="var">H1</span> <span class="id" title="var">n</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hent</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.sem.html#prev"><span class="id" title="definition">prev</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rin</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>, <span class="id" title="var">n</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="minilola.sem.html#last"><span class="id" title="definition">last</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expr_compat_hold_out" class="idref" href="#expr_compat_hold_out"><span class="id" title="lemma">expr_compat_hold_out</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="G:85" class="idref" href="#G:85"><span class="id" title="binder">G</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a>) (<a id="x:86" class="idref" href="#x:86"><span class="id" title="binder">x</span></a> : <a class="idref" href="minilola.lang.html#OUT"><span class="id" title="axiom">OUT</span></a>) (<a id="e:87" class="idref" href="#e:87"><span class="id" title="binder">e</span></a> : <a class="idref" href="minilola.lang.html#Expr"><span class="id" title="inductive">Expr</span></a>) (<a id="tmust:88" class="idref" href="#tmust:88"><span class="id" title="binder">tmust</span></a> : <a class="idref" href="minilola.lang.html#Pacing"><span class="id" title="inductive">Pacing</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#G:85"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#x:86"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:85"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#e:87"><span class="id" title="variable">e</span></a> <a class="idref" href="minilola.typ_soundness.html#tmust:88"><span class="id" title="variable">tmust</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:85"><span class="id" title="variable">G</span></a> (<a class="idref" href="minilola.lang.html#EHold"><span class="id" title="constructor">EHold</span></a> (<a class="idref" href="minilola.lang.html#Varout"><span class="id" title="constructor">Varout</span></a> <a class="idref" href="minilola.typ_soundness.html#x:86"><span class="id" title="variable">x</span></a>) <a class="idref" href="minilola.typ_soundness.html#e:87"><span class="id" title="variable">e</span></a>) <a class="idref" href="minilola.typ_soundness.html#tmust:88"><span class="id" title="variable">tmust</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">tmust</span> <span class="id" title="var">Hx</span> <span class="id" title="var">He</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout</span> <span class="id" title="var">H1</span> <span class="id" title="var">n</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">He</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout</span> <span class="id" title="var">H1</span> <span class="id" title="var">n</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> <span class="id" title="var">H1</span>] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">G</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span>|]; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">_</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">w</span> &amp; <span class="id" title="var">Hw</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.sem.html#hold"><span class="id" title="definition">hold</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <a class="idref" href="minilola.sem.html#last"><span class="id" title="definition">last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expr_compat_hold_in" class="idref" href="#expr_compat_hold_in"><span class="id" title="lemma">expr_compat_hold_in</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="G:89" class="idref" href="#G:89"><span class="id" title="binder">G</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a>) (<a id="x:90" class="idref" href="#x:90"><span class="id" title="binder">x</span></a> : <a class="idref" href="minilola.lang.html#IN"><span class="id" title="axiom">IN</span></a>) (<a id="e:91" class="idref" href="#e:91"><span class="id" title="binder">e</span></a> : <a class="idref" href="minilola.lang.html#Expr"><span class="id" title="inductive">Expr</span></a>) (<a id="tmust:92" class="idref" href="#tmust:92"><span class="id" title="binder">tmust</span></a> : <a class="idref" href="minilola.lang.html#Pacing"><span class="id" title="inductive">Pacing</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:89"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#e:91"><span class="id" title="variable">e</span></a> <a class="idref" href="minilola.typ_soundness.html#tmust:92"><span class="id" title="variable">tmust</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:89"><span class="id" title="variable">G</span></a> (<a class="idref" href="minilola.lang.html#EHold"><span class="id" title="constructor">EHold</span></a> (<a class="idref" href="minilola.lang.html#Varin"><span class="id" title="constructor">Varin</span></a> <a class="idref" href="minilola.typ_soundness.html#x:90"><span class="id" title="variable">x</span></a>) <a class="idref" href="minilola.typ_soundness.html#e:91"><span class="id" title="variable">e</span></a>) <a class="idref" href="minilola.typ_soundness.html#tmust:92"><span class="id" title="variable">tmust</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">tmust</span> <span class="id" title="var">He</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout</span> <span class="id" title="var">H1</span> <span class="id" title="var">n</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">He</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout</span> <span class="id" title="var">H1</span> <span class="id" title="var">n</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.sem.html#hold"><span class="id" title="definition">hold</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <a class="idref" href="minilola.sem.html#last"><span class="id" title="definition">last</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The typing rules for expressions are sound with respect to semantic typing

</div>
<div class="code">
<span class="id" title="keyword">Corollary</span> <a id="expr_type_sound" class="idref" href="#expr_type_sound"><span class="id" title="lemma">expr_type_sound</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="G:93" class="idref" href="#G:93"><span class="id" title="binder">G</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a>) (<a id="e:94" class="idref" href="#e:94"><span class="id" title="binder">e</span></a> : <a class="idref" href="minilola.lang.html#Expr"><span class="id" title="inductive">Expr</span></a>) (<a id="t:95" class="idref" href="#t:95"><span class="id" title="binder">t</span></a> : <a class="idref" href="minilola.lang.html#Pacing"><span class="id" title="inductive">Pacing</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ.html#ExprTypeSyn"><span class="id" title="inductive">ExprTypeSyn</span></a> <a class="idref" href="minilola.typ_soundness.html#G:93"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#e:94"><span class="id" title="variable">e</span></a> <a class="idref" href="minilola.typ_soundness.html#t:95"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="minilola.typ_soundness.html#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:93"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#e:94"><span class="id" title="variable">e</span></a> <a class="idref" href="minilola.typ_soundness.html#t:95"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">G</span> <span class="id" title="var">e</span> <span class="id" title="var">t</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="minilola.typ_soundness.html#expr_compat_val"><span class="id" title="lemma">expr_compat_val</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="minilola.typ_soundness.html#expr_compat_binop"><span class="id" title="lemma">expr_compat_binop</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="minilola.typ_soundness.html#expr_compat_var_out"><span class="id" title="lemma">expr_compat_var_out</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="minilola.typ_soundness.html#expr_compat_var_in"><span class="id" title="lemma">expr_compat_var_in</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="minilola.typ_soundness.html#expr_compat_hold_out"><span class="id" title="lemma">expr_compat_hold_out</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="minilola.typ_soundness.html#expr_compat_hold_in"><span class="id" title="lemma">expr_compat_hold_in</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="minilola.typ_soundness.html#expr_compat_prev_out"><span class="id" title="lemma">expr_compat_prev_out</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="minilola.typ_soundness.html#expr_compat_prev_in"><span class="id" title="lemma">expr_compat_prev_in</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab17"></a><h2 class="section">Soundness of the type system for specifications</h2>

<div class="paragraph"> </div>

 The partial semantics is less-defined than the total semantics 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="PartialExprSem_less_def" class="idref" href="#PartialExprSem_less_def"><span class="id" title="lemma">PartialExprSem_less_def</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="e:96" class="idref" href="#e:96"><span class="id" title="binder">e</span></a> <a id="rin:97" class="idref" href="#rin:97"><span class="id" title="binder">rin</span></a> <a id="rout1:98" class="idref" href="#rout1:98"><span class="id" title="binder">rout1</span></a> <a id="rout2:99" class="idref" href="#rout2:99"><span class="id" title="binder">rout2</span></a> <a id="n:100" class="idref" href="#n:100"><span class="id" title="binder">n</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#PartialExprSem"><span class="id" title="definition">PartialExprSem</span></a> <a class="idref" href="minilola.typ_soundness.html#e:96"><span class="id" title="variable">e</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:97"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#rout1:98"><span class="id" title="variable">rout1</span></a> <a class="idref" href="minilola.typ_soundness.html#n:100"><span class="id" title="variable">n</span></a> <a class="idref" href="minilola.opt.html#b8382ebd4d1ecdc4b5385bb249fc75b4"><span class="id" title="notation">≤</span></a> <a class="idref" href="minilola.sem.html#ExprSem"><span class="id" title="definition">ExprSem</span></a> <a class="idref" href="minilola.typ_soundness.html#e:96"><span class="id" title="variable">e</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="minilola.typ_soundness.html#rin:97"><span class="id" title="variable">rin</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="minilola.typ_soundness.html#merge"><span class="id" title="definition">merge</span></a> <a class="idref" href="minilola.typ_soundness.html#rout1:98"><span class="id" title="variable">rout1</span></a> <a class="idref" href="minilola.typ_soundness.html#rout2:99"><span class="id" title="variable">rout2</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="minilola.typ_soundness.html#n:100"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">intros</span> ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <a class="idref" href="minilola.sem.html#sync"><span class="id" title="definition">sync</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.typ_soundness.html#merge"><span class="id" title="definition">merge</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rout1</span> <span class="id" title="var">s</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <a class="idref" href="minilola.sem.html#sync"><span class="id" title="definition">sync</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="minilola.sem.html#prev_less_def"><span class="id" title="lemma">prev_less_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.typ_soundness.html#merge"><span class="id" title="definition">merge</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rout1</span> <span class="id" title="var">s</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">w</span> |]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="minilola.sem.html#prev_less_def"><span class="id" title="lemma">prev_less_def</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="minilola.sem.html#hold_less_def"><span class="id" title="lemma">hold_less_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.typ_soundness.html#merge"><span class="id" title="definition">merge</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">rout1</span> <span class="id" title="var">s</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">w</span> |]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="minilola.sem.html#hold_less_def"><span class="id" title="lemma">hold_less_def</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHe1</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout1</span> <span class="id" title="var">rout2</span> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHe2</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout1</span> <span class="id" title="var">rout2</span> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHe1</span>, <span class="id" title="var">IHe2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Construct a <span class="inlinecode"><span class="id" title="var">t</span></span>-paced stream out of a <span class="inlinecode"><span class="id" title="var">t</span></span>-paced expressions 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="witness" class="idref" href="#witness"><span class="id" title="definition">witness</span></a> <a id="rin:101" class="idref" href="#rin:101"><span class="id" title="binder">rin</span></a> <a id="rout:102" class="idref" href="#rout:102"><span class="id" title="binder">rout</span></a> <a id="e:103" class="idref" href="#e:103"><span class="id" title="binder">e</span></a> <a id="t:104" class="idref" href="#t:104"><span class="id" title="binder">t</span></a> : <a class="idref" href="minilola.lang.html#stream"><span class="id" title="definition">stream</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="n:105" class="idref" href="#n:105"><span class="id" title="binder">n</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="minilola.sem.html#PacingSemBool"><span class="id" title="definition">PacingSemBool</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:101"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#t:104"><span class="id" title="variable">t</span></a> <a class="idref" href="minilola.typ_soundness.html#n:105"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#PartialExprSem"><span class="id" title="definition">PartialExprSem</span></a> <a class="idref" href="minilola.typ_soundness.html#e:103"><span class="id" title="variable">e</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:101"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:102"><span class="id" title="variable">rout</span></a> <a class="idref" href="minilola.typ_soundness.html#n:105"><span class="id" title="variable">n</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Updating a well-paced partial output map with a well-paced stream
  gives a well-paced partial output map.

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="EnvRel_update" class="idref" href="#EnvRel_update"><span class="id" title="lemma">EnvRel_update</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="G:106" class="idref" href="#G:106"><span class="id" title="binder">G</span></a> <a id="t:107" class="idref" href="#t:107"><span class="id" title="binder">t</span></a> <a id="rin:108" class="idref" href="#rin:108"><span class="id" title="binder">rin</span></a> <a id="rout:109" class="idref" href="#rout:109"><span class="id" title="binder">rout</span></a> <a id="x:110" class="idref" href="#x:110"><span class="id" title="binder">x</span></a> <a id="e:111" class="idref" href="#e:111"><span class="id" title="binder">e</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#G:106"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#x:110"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#EnvRel"><span class="id" title="definition">EnvRel</span></a> <a class="idref" href="minilola.typ_soundness.html#G:106"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:108"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:109"><span class="id" title="variable">rout</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#ExprRel"><span class="id" title="definition">ExprRel</span></a> <a class="idref" href="minilola.typ_soundness.html#G:106"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#t:107"><span class="id" title="variable">t</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:108"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#e:111"><span class="id" title="variable">e</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#EnvRel"><span class="id" title="definition">EnvRel</span></a> (<a class="idref" href="minilola.lang.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="minilola.typ_soundness.html#G:106"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#x:110"><span class="id" title="variable">x</span></a> <a class="idref" href="minilola.typ_soundness.html#t:107"><span class="id" title="variable">t</span></a>) <a class="idref" href="minilola.typ_soundness.html#rin:108"><span class="id" title="variable">rin</span></a> (<a class="idref" href="minilola.typ_soundness.html#pextend"><span class="id" title="definition">pextend</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:109"><span class="id" title="variable">rout</span></a> <a class="idref" href="minilola.typ_soundness.html#x:110"><span class="id" title="variable">x</span></a> (<a class="idref" href="minilola.typ_soundness.html#witness"><span class="id" title="definition">witness</span></a> <a class="idref" href="minilola.typ_soundness.html#rin:108"><span class="id" title="variable">rin</span></a> <a class="idref" href="minilola.typ_soundness.html#rout:109"><span class="id" title="variable">rout</span></a> <a class="idref" href="minilola.typ_soundness.html#e:111"><span class="id" title="variable">e</span></a> <a class="idref" href="minilola.typ_soundness.html#t:107"><span class="id" title="variable">t</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">G</span> <span class="id" title="var">t</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">Hx</span> <span class="id" title="var">H1</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">He</span> <span class="id" title="var">rout</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>] <span class="id" title="var">H3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.lang.html#update"><span class="id" title="definition">update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.typ_soundness.html#pextend"><span class="id" title="definition">pextend</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="minilola.lang.html#OUT_dec"><span class="id" title="axiom">OUT_dec</span></a>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">ty</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.lang.html#update"><span class="id" title="definition">update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.typ_soundness.html#pextend"><span class="id" title="definition">pextend</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="minilola.lang.html#OUT_dec"><span class="id" title="axiom">OUT_dec</span></a>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">Hy</span> <span class="id" title="keyword">as</span> →. <span class="id" title="var">now</span> <span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">ty</span> <span class="id" title="var">w</span> <span class="id" title="var">Hy</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.lang.html#update"><span class="id" title="definition">update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.typ_soundness.html#pextend"><span class="id" title="definition">pextend</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="minilola.lang.html#OUT_dec"><span class="id" title="axiom">OUT_dec</span></a>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">injection</span> <span class="id" title="var">Hy</span> <span class="id" title="keyword">as</span> →.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">as</span> &lt;-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span> <span class="id" title="var">Hn</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">He</span> <span class="id" title="var">n</span> <span class="id" title="var">Hn</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.typ_soundness.html#witness"><span class="id" title="definition">witness</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="minilola.sem.html#PacingSemBool_true_iff"><span class="id" title="lemma">PacingSemBool_true_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <a class="idref" href="minilola.typ_soundness.html#PartialExprSem"><span class="id" title="definition">PartialExprSem</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span> <span class="id" title="var">Hwit</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.typ_soundness.html#witness"><span class="id" title="definition">witness</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hwit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="minilola.sem.html#PacingSemBool"><span class="id" title="definition">PacingSemBool</span></a> <span class="id" title="var">rin</span> <span class="id" title="var">ty</span> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="minilola.sem.html#PacingSemBool_true_iff"><span class="id" title="lemma">PacingSemBool_true_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> <span class="id" title="var">H2</span>] <span class="id" title="var">H3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">H3</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hy</span> <span class="id" title="var">Heq</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The typing rule for empty lists of equations is sound 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="spec_compat_nil" class="idref" href="#spec_compat_nil"><span class="id" title="lemma">spec_compat_nil</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="G:112" class="idref" href="#G:112"><span class="id" title="binder">G</span></a>, <a class="idref" href="minilola.typ_soundness.html#SpecTypeSem"><span class="id" title="definition">SpecTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:112"><span class="id" title="variable">G</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">G</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout1</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The typing rule for non-empty lists of equations is sound 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="spec_compat_cons" class="idref" href="#spec_compat_cons"><span class="id" title="lemma">spec_compat_cons</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="G:113" class="idref" href="#G:113"><span class="id" title="binder">G</span></a> <a id="s:114" class="idref" href="#s:114"><span class="id" title="binder">s</span></a> <a id="x:115" class="idref" href="#x:115"><span class="id" title="binder">x</span></a> <a id="e:116" class="idref" href="#e:116"><span class="id" title="binder">e</span></a> <a id="t:117" class="idref" href="#t:117"><span class="id" title="binder">t</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#G:113"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#x:115"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#ExprTypeSem"><span class="id" title="definition">ExprTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:113"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#e:116"><span class="id" title="variable">e</span></a> <a class="idref" href="minilola.typ_soundness.html#t:117"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#SpecTypeSem"><span class="id" title="definition">SpecTypeSem</span></a> (<a class="idref" href="minilola.lang.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="minilola.typ_soundness.html#G:113"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#x:115"><span class="id" title="variable">x</span></a> <a class="idref" href="minilola.typ_soundness.html#t:117"><span class="id" title="variable">t</span></a>) <a class="idref" href="minilola.typ_soundness.html#s:114"><span class="id" title="variable">s</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ_soundness.html#SpecTypeSem"><span class="id" title="definition">SpecTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:113"><span class="id" title="variable">G</span></a> (<a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="minilola.typ_soundness.html#x:115"><span class="id" title="variable">x</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="minilola.typ_soundness.html#t:117"><span class="id" title="variable">t</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="minilola.typ_soundness.html#e:116"><span class="id" title="variable">e</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="minilola.typ_soundness.html#s:114"><span class="id" title="variable">s</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">G</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">t</span> <span class="id" title="var">Hx</span> <span class="id" title="var">He</span> <span class="id" title="var">Hs</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout1</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">He'</span> := <span class="id" title="var">He</span> <span class="id" title="var">rin</span> <span class="id" title="var">rout1</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hs</span> <span class="id" title="var">rin</span> (<a class="idref" href="minilola.typ_soundness.html#pextend"><span class="id" title="definition">pextend</span></a> <span class="id" title="var">rout1</span> <span class="id" title="var">x</span> (<a class="idref" href="minilola.typ_soundness.html#witness"><span class="id" title="definition">witness</span></a> <span class="id" title="var">rin</span> <span class="id" title="var">rout1</span> <span class="id" title="var">e</span> <span class="id" title="var">t</span>))) <span class="id" title="keyword">as</span> [<span class="id" title="var">rout2</span> <span class="id" title="var">Hrout2</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="minilola.typ_soundness.html#EnvRel_update"><span class="id" title="lemma">EnvRel_update</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hx'</span> : <span class="id" title="var">rout1</span> <span class="id" title="var">x</span> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="minilola.typ_soundness.html#merge_pextend"><span class="id" title="lemma">merge_pextend</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrout2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hrout2</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.typ_soundness.html#merge"><span class="id" title="definition">merge</span></a> <span class="id" title="tactic">at</span> 1, <a class="idref" href="minilola.typ_soundness.html#extend"><span class="id" title="definition">extend</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hx'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="minilola.lang.html#OUT_dec"><span class="id" title="axiom">OUT_dec</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.typ_soundness.html#witness"><span class="id" title="definition">witness</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="minilola.sem.html#PacingSemBool"><span class="id" title="definition">PacingSemBool</span></a> <span class="id" title="var">rin</span> <span class="id" title="var">t</span> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Ht</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="minilola.typ_soundness.html#PartialExprSem_less_def"><span class="id" title="lemma">PartialExprSem_less_def</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.typ_soundness.html#merge"><span class="id" title="definition">merge</span></a>, <a class="idref" href="minilola.typ_soundness.html#extend"><span class="id" title="definition">extend</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hx'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="minilola.lang.html#OUT_dec"><span class="id" title="axiom">OUT_dec</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span>|]; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="minilola.typ_soundness.html#witness"><span class="id" title="definition">witness</span></a>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">specialize</span> (<span class="id" title="var">He'</span> <span class="id" title="var">_</span> <span class="id" title="var">Hn</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="minilola.sem.html#PacingSemBool_true_iff"><span class="id" title="lemma">PacingSemBool_true_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <a class="idref" href="minilola.sem.html#PacingSemBool"><span class="id" title="definition">PacingSemBool</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Ht</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="minilola.sem.html#PacingSemBool_true_iff"><span class="id" title="lemma">PacingSemBool_true_iff</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The typing rules for equations are sound with respect to semantic typing 
</div>
<div class="code">
<span class="id" title="keyword">Corollary</span> <a id="spec_type_sound" class="idref" href="#spec_type_sound"><span class="id" title="lemma">spec_type_sound</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="G:118" class="idref" href="#G:118"><span class="id" title="binder">G</span></a> : <a class="idref" href="minilola.lang.html#TypeEnv"><span class="id" title="definition">TypeEnv</span></a>) (<a id="s:119" class="idref" href="#s:119"><span class="id" title="binder">s</span></a> : <a class="idref" href="minilola.lang.html#Spec"><span class="id" title="definition">Spec</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ.html#SpecTypeSyn"><span class="id" title="inductive">SpecTypeSyn</span></a> <a class="idref" href="minilola.typ_soundness.html#G:118"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#s:119"><span class="id" title="variable">s</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="minilola.typ_soundness.html#SpecTypeSem"><span class="id" title="definition">SpecTypeSem</span></a> <a class="idref" href="minilola.typ_soundness.html#G:118"><span class="id" title="variable">G</span></a> <a class="idref" href="minilola.typ_soundness.html#s:119"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="minilola.typ_soundness.html#spec_compat_nil"><span class="id" title="lemma">spec_compat_nil</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="minilola.typ_soundness.html#expr_type_sound"><span class="id" title="lemma">expr_type_sound</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="minilola.typ_soundness.html#spec_compat_cons"><span class="id" title="lemma">spec_compat_cons</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Well typed specifications are consistent 
</div>
<div class="code">
<span class="id" title="keyword">Corollary</span> <a id="type_soundness" class="idref" href="#type_soundness"><span class="id" title="lemma">type_soundness</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="s:120" class="idref" href="#s:120"><span class="id" title="binder">s</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="minilola.typ.html#SpecTypeSyn"><span class="id" title="inductive">SpecTypeSyn</span></a> <a class="idref" href="minilola.typ_soundness.html#bot_tenv"><span class="id" title="definition">bot_tenv</span></a> <a class="idref" href="minilola.typ_soundness.html#s:120"><span class="id" title="variable">s</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.0.1/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="minilola.typ_soundness.html#Consistent"><span class="id" title="definition">Consistent</span></a> <a class="idref" href="minilola.typ_soundness.html#s:120"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="minilola.typ_soundness.html#adequacy"><span class="id" title="lemma">adequacy</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="minilola.typ_soundness.html#spec_type_sound"><span class="id" title="lemma">spec_type_sound</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://rocq-prover.org/">coqdoc</a>
</div>

</div>

</body>
</html>